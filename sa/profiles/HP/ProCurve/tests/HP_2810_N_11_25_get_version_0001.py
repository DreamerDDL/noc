# -*- coding: utf-8 -*-
##----------------------------------------------------------------------
## HP.ProCurve.get_version test
## Auto-generated by ./noc debug-script at 21.01.2013 18:15:34
##----------------------------------------------------------------------
## Copyright (C) 2007-2013 The NOC Project
## See LICENSE for details
##----------------------------------------------------------------------

## NOC modules
from noc.lib.test import ScriptTestCase


class HP_ProCurve_get_version_Test(ScriptTestCase):
    script = "HP.ProCurve.get_version"
    vendor = "HP"
    platform = "2810"
    version = "N.11.25"
    input = {}
    result = u'<class \'noc.sa.script.exception.CLISyntaxError\'>\nerminal length 1000Invalid input: erminal\n\nSTART OF TRACEBACK\n------------------------------------------------------------------------\nFile: /opt/noc/sa/script/script.py (Line: 628)\nFunction: cli\n  621             if isinstance(data, Exception):\n  622                 # Exception captured\n  623                 raise data\n  624             if not ignore_errors:\n  625                 # Check for syntax error\n  626                 if (self.profile.rx_pattern_syntax_error and\n  627                     self.profile.rx_pattern_syntax_error.search(data)):\n  628 ==>                 raise self.CLISyntaxError(data)\n  629                 # Then check for operaion error\n  630                 if (self.profile.rx_pattern_operation_error and\n  631                     self.profile.rx_pattern_operation_error.search(data)):\n  632                     raise self.CLIOperationError(data)\n  633             # Echo cancelation\n  634             if self.strip_echo and data.lstrip().startswith(cmd):\nVariables:\n                 cmd = \'walkMIB sysDescr\'\n                  cc = \'CLI:walkMIB sysDescr\'\n          bulk_lines = None\n               cache = {\'CLI:walkMIB sysDescr\': \'erminal length 1000Invalid input: erminal\\n\'}\n      command_submit = \'\\n\'\n              cached = True\n          from_cache = False\n                file = None\n             list_re = None\n       ignore_errors = False\n                data = \'erminal length 1000Invalid input: erminal\\n\'\n                self = <Script(script-192.168.2.12-HP.ProCurve.get_version, started 140091900532480)>\n------------------------------------------------------------------------\nFile: /opt/noc/sa/profiles/HP/ProCurve/get_version.py (Line: 34)\nFunction: execute\n   27             v = None\n   28             if self.snmp and self.access_profile.snmp_ro:\n   29                 try:\n   30                     v = self.snmp.get("1.3.6.1.2.1.1.1.0")  # sysDescr.0\n   31                 except self.snmp.TimeOutError:\n   32                     pass  # Fallback to CLI\n   33             if not v:\n   34 ==>             v = self.cli("walkMIB sysDescr", cached=True)\n   35             try:\n   36                 match = self.re_search(self.rx_ver, v.strip()) \n   37             except self.UnexpectedResultError:\n   38                 match = self.re_search(self.rx_ver_new, v.strip())\n   39             platform = match.group("platform").split(\'-\')[0]\n   40             return {\nVariables:\n                self = <Script(script-192.168.2.12-HP.ProCurve.get_version, started 140091900532480)>\n                   v = None\n------------------------------------------------------------------------\nFile: /opt/noc/sa/script/script.py (Line: 417)\nFunction: guarded_run\n  410                     return result\n  411                 except KeyError:\n  412                     self.debug("Not in call cache: %r, %r" % (self.name,\n  413                                                               self.kwargs))\n  414                     pass\n  415                 # Calling script body\n  416             self._thread_id = thread.get_ident()\n  417 ==>         result = self.execute(**self.kwargs)\n  418             # Enforce interface result checking\n  419             for i in self.implements:\n  420                 result = i.script_clean_result(self.profile, result)\n  421             # Cache result when required\n  422             if self.cache and self.parent is not None:\n  423                 self.debug("Write to call cache: %s, %s, %r" % (self.name,\nVariables:\n                   i = <noc.sa.interfaces.igetversion.IGetVersion object at 0x3c3b690>\n                self = <Script(script-192.168.2.12-HP.ProCurve.get_version, started 140091900532480)>\n------------------------------------------------------------------------\nFile: /opt/noc/sa/script/script.py (Line: 440)\nFunction: run\n  433     \n  434         def run(self):\n  435             """Script thread worker method"""\n  436             self.debug("Running")\n  437             result = None\n  438             try:\n  439                 with self.cancelable():\n  440 ==>                 result = self.guarded_run()\n  441             except self.TimeOutError:\n  442                 self.error("Timed out")\n  443                 self.e_timeout = True\n  444             except CancelledError:\n  445                 self.error("Cancelled")\n  446                 self.e_cancel = True\nVariables:\n                self = <Script(script-192.168.2.12-HP.ProCurve.get_version, started 140091900532480)>\n                   r = ["<class \'noc.sa.script.exception.CLISyntaxError\'>", \'erminal length 1000Invalid input: erminal\\n\']\n              result = None\n                   v = CLISyntaxError(\'erminal length 1000Invalid input: erminal\\n\',)\n                  tb = <traceback object at 0x48855f0>\n                   t = <class \'noc.sa.script.exception.CLISyntaxError\'>\n------------------------------------------------------------------------\nEND OF TRACEBACK'
    motd = ''
    cli = {
## 'terminal length 1000'
'terminal length 1000': """ProCurve J9022A Switch 2810-48G
Software revision N.11.25

Copyright (C) 1991-2010 Hewlett-Packard Co.  All Rights Reserved.

                           RESTRICTED RIGHTS LEGEND

 Use, duplication, or disclosure by the Government is subject to restrictions
 as set forth in subdivision (b) (3) (ii) of the Rights in Technical Data and
 Computer Software clause at 52.227-7013.

         HEWLETT-PACKARD COMPANY, 3000 Hanover St., Palo Alto, CA 94303
""", 
'walkMIB sysDescr':  'erminal length 1000Invalid input: erminal\n', 
}
    snmp_get = {}
    snmp_getnext = {}
    http_get = {}
