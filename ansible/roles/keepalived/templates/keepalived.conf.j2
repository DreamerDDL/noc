! Configuration File for keepalived

global_defs {
   router_id {{ ansible_nodename }}
}

{% if 'svc-nginx' in groups and groups['svc-nginx'] | count  > 1 %}
include /etc/keepalived/nginx.cnf
{% endif %}

{% if 'svc-patroni' in groups and groups['svc-patroni'] | count  > 1 %}
include /etc/keepalived/patroni.cnf
{% endif %}
